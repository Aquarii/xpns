{% extends 'base.html' %} {% block content %}

<div class="container printable">
	<div></div>
	<div>
		<h1 style="text-align: center" class="m-3">
			دوره »{ {{ '{:.2f}'.format(period_max/100) }} }«
		</h1>
		<p style="text-align: center">
			<small> شماره کارت </small>
			<br />
			<big
				style="
					font-weight: bold;
					font-family: 'Courier New', Courier, monospace;
				"
				>6219 8610 6342 9780 <br />
				علی کُرلو</big
			>
		</p>
		<br />
	</div>
	<table class="table-bordered table-striped table">
		<thead>
			<tr>
				<th style="text-align: center" scope="col">#</th>
				<th style="text-align: center" scope="col">ساکن</th>
				<th style="text-align: center" scope="col">بدهی (تومان)</th>
				<th style="text-align: center" scope="col">جزئیات</th>
				{% if current_user.is_authenticated %}
				<th style="text-align: center" scope="col">واریز بدهی</th>
				{% endif %}
			</tr>
		</thead>
		<tbody>
			{% for row in residents_balances %}
			<tr>
				<th scope="row" class="m-4">{{ row[1] }}</th>
				<td class="m-4">
					{{'آقای/خانم {}'.format(row[2] if row[2] else row[4]) }}
				</td>
				<td style="direction: ltr; text-align: right" class="m-4">
					{{ '{:,}'.format(ceil(row[3]/1000)*1000) }}
				</td>
				<td style="text-align: center" class="m-4">
					<a href="{{ url_for('view_details', unit_id=row[0]) }}"
						>جزئیات</a
					>
				</td>
				{% if current_user.is_authenticated %}
				<td style="text-align: center" scope="col">
					<a
						href="{{ url_for('add_transaction',
                      unit_id=row[0],
                      payer=(row[2] or row[4]),
                      amount=row[3],
                      date='today') }}"
						>پرداخت</a
					>
				</td>
				{% endif %}
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% if current_user.is_authenticated %}
<div class="container">
	<h2 class="my-4" style="text-align: center">صندوق</h2>
	<table class="table-bordered table-striped table">
		<thead>
			<tr>
				<th style="text-align: center" scope="col">#</th>
				<th style="text-align: center" scope="col">ساختمان</th>
				<th style="text-align: center" scope="col">
					ذخیره صندوق (تومان)
				</th>
				<th style="text-align: center" scope="col">جزئیات</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<!-- REVIEW -->
				<th scope="row" class="m-4">{{ building['id'] }}</th>
				<td class="m-4">{{ building['name'] }}</td>
				<td style="direction: ltr; text-align: center" class="m-4">
					{{ '{:,}'.format(building['reserve']) }}
				</td>
				<td class="m-4"><a href="#">جزئیات</a></td>
			</tr>
		</tbody>
	</table>
</div>
<div class="container {{ 'printable' if include_latest_expenses_in_print else '' }}">
	<h2 class="my-4" style="text-align: center">لیست مخارج آخرین دوره</h2>
	<table class="table-bordered table-striped table">
		<thead>
			<tr>
				<th style="text-align: center" scope="col">#</th>
				<th style="text-align: center" scope="col">مخارج</th>
				<th style="text-align: center" scope="col">دوره</th>
				<th style="text-align: center;" scope="col">توضیحات</th>
				<th style="text-align: center" scope="col">مبلغ (تومان)</th>
			</tr>
		</thead>
		<tbody>
			{% for row in expenses_list|reverse %}
			<tr>
				<th scope="row" class="m-4">{{ row.expense_id }}</th>
				<td class="m-4">{{ row.name }}</td>
				<td style="text-align: center" class="m-4">{{ row.period }}</td>
				<td class="m-4">{{ row.description or '-' }}</td>
				<td class="m-4">{{'{:,}'.format(row.amount) }}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<div style="text-align:center; margin-top: 1rem;">
		<a href="{{ url_for('view_expenses') }}">مشاهده همه مخارج</a>
	</div>
</div>
{% endif %} {% endblock %}
